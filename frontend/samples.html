<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make better choice from the samples | NOVOSTELLA TECHNOLOGIES LTD</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Waiting+Summer&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.cdnfonts.com/css/familjen-grotesk" rel="stylesheet">
    <link rel="shortcut icon" href="../images/logo.png" type="image/x-icon">
    <link href="https://fonts.cdnfonts.com/css/waiting-summer" rel="stylesheet">
    <link rel="stylesheet" href="../css/samples.css?v-1.0">
</head>
<body>
    <header>
    <nav class="navbar">
        <div id="novostella-logo" class="logo">
            <img src="../images/logo.png" alt="Novostella Logo">
            <span>NOVOSTELLA Technologies Ltd</span>
        </div>
        <div class="nav-links" id="nav-links">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="#sample-container">Explore samples</a></li>
            </ul>
        </div>
    </nav>
</header>
    <main>
        <section class="samples-section">
            <div class="container">
                <h2 class="samples-title">To be confident Enough. Consider these samples.</h2>

                <div class="category-tabs">
                    <button class="tab-btn active" data-category="all">All</button>
                    <button class="tab-btn" data-category="Images">Images</button>
                    <button class="tab-btn" data-category="Videos">Videos</button>
                </div>

                <div class="sample-grid" id="sample-container">
                    <p id="loading-message">Loading samples...</p>
                    <p id="error-message" style="display: none; color: red;">Failed to load samples. Please try again later.</p>
                </div>
            </div>
        </section>
    </main>
    <div id="sample-popup" class="popup-overlay">
    <div class="popup-content">
        <span class="close-popup-btn">&times;</span>
        <div id="popup-media-container" class="popup-media-container">
            </div>
        <div class="popup-description">
            <h3 id="popup-title"></h3>
            <p id="popup-text"></p>
        </div>
    </div>
</div>
    <footer>
        <div class="copyright">
            <p>&copy; 2025 Novostella Technologies. All rights reserved.</p>
        </div>
    </footer>
<script>
     document.addEventListener('DOMContentLoaded', () => {
        const sampleContainer = document.getElementById('sample-container');
        const loadingMessage = document.getElementById('loading-message');
        const errorMessage = document.getElementById('error-message');
        const popupOverlay = document.getElementById('sample-popup');
        const popupMediaContainer = document.getElementById('popup-media-container');
        const popupTitle = document.getElementById('popup-title');
        const popupText = document.getElementById('popup-text');
        const closePopupButton = document.querySelector('.close-popup-btn');

        let allSamplesData = [];

        const fetchSamples = async () => {
            try {
                const response = await fetch('../backend/get_samples.php');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                if (data.error) {
                    throw new Error(data.error);
                }
                allSamplesData = data;
                displaySamples(allSamplesData);
            } catch (error) {
                console.error('Fetch error:', error);
                loadingMessage.style.display = 'none';
                errorMessage.style.display = 'block';
            }
        };

        const displaySamples = (samples) => {
            sampleContainer.innerHTML = '';
            if (samples.length === 0) {
                sampleContainer.innerHTML = '<p style="text-align: center;">No samples found.</p>';
            } else {
                samples.forEach(sample => {
                    const sampleItem = document.createElement('div');
                    sampleItem.classList.add('sample-item');
                    sampleItem.setAttribute('data-category', sample.category);

                    let mediaElement;
                    if (sample.category === 'Videos') {
                        mediaElement = `<video src="${sample.url}" controls></video>`;
                    } else {
                        mediaElement = `<img src="${sample.url}" alt="${sample.description}">`;
                    }

                    sampleItem.innerHTML = `
                        ${mediaElement}
                        <div class="sample-info">
                            <p>${sample.description}</p>
                        </div>
                    `;
                    sampleContainer.appendChild(sampleItem);


                    sampleItem.addEventListener('click', () => {
                        showPopup(sample);
                    });
                });
            }
            loadingMessage.style.display = 'none';
        };

        const showPopup = (sample) => {
            popupMediaContainer.innerHTML = '';

            if (sample.category === 'Videos') {
                const videoElement = document.createElement('video');
                videoElement.src = sample.url;
                videoElement.controls = true;
                popupMediaContainer.appendChild(videoElement);
            } else {
                const imageElement = document.createElement('img');
                imageElement.src = sample.url;
                imageElement.alt = sample.description;
                popupMediaContainer.appendChild(imageElement);
            }
            popupText.textContent = sample.description;
            
            popupOverlay.style.display = 'flex';
        };

        closePopupButton.addEventListener('click', () => {
            const video = popupMediaContainer.querySelector('video');
            if (video) {
                video.pause();
            }
            popupOverlay.style.display = 'none';
        });
        popupOverlay.addEventListener('click', (e) => {
            if (e.target === popupOverlay) {
                const video = popupMediaContainer.querySelector('video');
                if (video) {
                    video.pause();
                }
                popupOverlay.style.display = 'none';
            }
        });

const handleCategoryFilter = (category) => {
    const filteredSamples = allSamplesData.filter(sample => category === 'all' || sample.category === category);
    displaySamples(filteredSamples);
};

        const tabs = document.querySelectorAll('.tab-btn');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(btn => btn.classList.remove('active'));
                tab.classList.add('active');
                handleCategoryFilter(tab.dataset.category);
            });
        });

        fetchSamples();
    });
</script>
</body>
</html>